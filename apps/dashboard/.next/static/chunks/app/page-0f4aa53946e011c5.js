(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4850:function(e,t,r){"use strict";var n,s;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(3079)},6776:function(e,t,r){Promise.resolve().then(r.bind(r,3675)),Promise.resolve().then(r.bind(r,1030))},3675:function(e,t,r){"use strict";r.r(t),r.d(t,{AgentCard:function(){return u}});var n=r(7573),s=r(2056),a=r.n(s);function o(e){let{status:t,className:r}=e;return(0,n.jsx)("span",{className:function(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,n,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=e(t[r]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n)}return s}(e))&&(n&&(n+=" "),n+=t);return n}("inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium border",(e=>{switch(e.toUpperCase()){case"RUNNING":return"bg-green-100 text-green-700 border-green-200";case"READY":case"QUEUED":return"bg-blue-100 text-blue-700 border-blue-200";case"FAILED":return"bg-red-100 text-red-700 border-red-200";case"SUCCEEDED":default:return"bg-gray-100 text-gray-700 border-gray-200";case"KILLED":return"bg-orange-100 text-orange-700 border-orange-200"}})(t),r),children:t})}function i(e){let{health:t}=e,r=t||"UNKNOWN",s={HEALTHY:"bg-green-100 text-green-700 border-green-200",FLAKY:"bg-amber-100 text-amber-700 border-amber-200",FAILING:"bg-red-100 text-red-700 border-red-200"}[r]||"bg-gray-100 text-gray-700 border-gray-200";return(0,n.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium border ".concat(s),children:r})}var c=r(9570),l=r(7653);function u(e){let{agent:t}=e,[r,s]=(0,l.useState)(),[u,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/agents/".concat(t.id,"/summary"));if(e.ok){let t=await e.json();s(t.health)}}catch(e){console.error("Failed to fetch health:",e)}};e();let r=setInterval(e,1e4);return()=>clearInterval(r)},[t.id]),(0,l.useEffect)(()=>{d("RUNNING"===t.status)},[t.status]);let f="NODE"===t.language?"\uD83D\uDFE2":"\uD83D\uDC0D",h=t.schedules&&t.schedules.length>0;return(0,n.jsxs)("div",{className:"bg-white border rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-lg",children:f}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:t.name})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(o,{status:t.status}),(0,n.jsx)(i,{health:r})]})]}),(0,n.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,n.jsx)("span",{className:"font-medium",children:"Limits:"})," ",t.limitsCpu||0," CPU, ",t.limitsMemMb||0," MB RAM"]}),h&&(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,n.jsx)("span",{className:"font-medium",children:"Schedule:"})," ",t.schedules[0].cronExpr,!t.schedules[0].enabled&&(0,n.jsx)("span",{className:"ml-1 text-amber-600",children:"(disabled)"})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(c.StartStopButtons,{agentId:t.id,isRunning:u}),(0,n.jsx)(a(),{href:"/agents/".concat(t.id),className:"px-3 py-1.5 rounded-md bg-gray-100 text-gray-700 text-sm hover:bg-gray-200 transition-colors",children:"View"}),u&&(0,n.jsx)(a(),{href:"/agents/".concat(t.id,"/logs"),className:"px-3 py-1.5 rounded-md bg-blue-100 text-blue-700 text-sm hover:bg-blue-200 transition-colors",children:"Logs"})]})]})}},1030:function(e,t,r){"use strict";r.r(t),r.d(t,{KpiStrip:function(){return o}});var n=r(7573),s=r(7653);let a=r(4850).env.NEXT_PUBLIC_GATEWAY_URL||"http://localhost:3000";function o(){let[e,t]=(0,s.useState)({runsStarted:0,restarts:0,peakMemMb:0,schedulesTriggered:0});return(0,s.useEffect)(()=>{let e=!0,r=async()=>{try{let r=await fetch("".concat(a,"/api/summary/kpis"),{cache:"no-store"});if(r.ok){let n=await r.json();e&&t(n)}}catch(e){}};r();let n=setInterval(r,5e3);return()=>{e=!1,clearInterval(n)}},[]),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[(0,n.jsx)(i,{label:"Runs Started",value:e.runsStarted}),(0,n.jsx)(i,{label:"Auto-Restarts",value:e.restarts}),(0,n.jsx)(i,{label:"Peak Mem (MB)",value:e.peakMemMb}),(0,n.jsx)(i,{label:"Schedules",value:e.schedulesTriggered})]})}function i(e){let{label:t,value:r}=e;return(0,n.jsxs)("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[(0,n.jsx)("div",{className:"text-xs text-gray-500 font-medium",children:t}),(0,n.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:r})]})}},9570:function(e,t,r){"use strict";r.r(t),r.d(t,{StartStopButtons:function(){return l}});var n=r(7573),s=r(7653);let a=r(4850).env.NEXT_PUBLIC_GATEWAY_URL||"http://localhost:3000";async function o(e,t){let r=await fetch("".concat(a).concat(e),{cache:"no-store",...t});if(!r.ok)throw Error("".concat(r.status," ").concat(r.statusText));return r.json()}async function i(e){return await o("/api/agents/".concat(e,"/start"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})}var c=r(2859);function l(e){let{agentId:t,isRunning:r}=e,[a,o]=(0,s.useState)(!1),l=(0,c.useRouter)(),u=async()=>{o(!0);try{let e=await i(t);e&&e.runId?l.push("/agents/".concat(t,"/logs?runId=").concat(e.runId)):l.refresh()}catch(e){console.error("Failed to start agent:",e),alert("Failed to start agent")}finally{o(!1)}};return(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:u,disabled:a||r,className:"bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?"Starting...":"Run now"}),(0,n.jsx)("button",{disabled:!r,className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Stop"})]})}},3079:function(e){!function(){var t={229:function(e){var t,r,n,s=e.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c=[],l=!1,u=-1;function d(){l&&n&&(l=!1,n.length?c=n.concat(c):u=-1,c.length&&f())}function f(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(n=c,c=[];++u<t;)n&&n[u].run();u=-1,t=c.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||l||i(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var a=r[e]={exports:{}},o=!0;try{t[e](a,a.exports,n),o=!1}finally{o&&delete r[e]}return a.exports}n.ab="//";var s=n(229);e.exports=s}()},2056:function(e,t,r){e.exports=r(3040)},2859:function(e,t,r){e.exports=r(2988)}},function(e){e.O(0,[91,293,16,744],function(){return e(e.s=6776)}),_N_E=e.O()}]);