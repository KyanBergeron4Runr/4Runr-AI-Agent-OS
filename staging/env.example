# 4Runr Gateway Staging Environment Configuration
# Copy this to .env and update with your actual values

# === REQUIRED CONFIGURATION ===
PORT=3000
DATABASE_URL=postgresql://gateway:STRONGPASS@db:5432/gateway
REDIS_URL=redis://:redispass@redis:6379
TOKEN_HMAC_SECRET=change-me-to-a-strong-secret-at-least-32-chars
SECRETS_BACKEND=file
SECRETS_FILE=/run/secrets/4runr-secrets.json
HTTP_TIMEOUT_MS=6000
DEFAULT_TIMEZONE=America/Toronto

# 32-byte base64 for KEK. Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
KEK_BASE64=REPLACE_WITH_BASE64_32B

# === DATABASE CONFIGURATION ===
DB_PASSWORD=STRONGPASS
REDIS_PASSWORD=redispass

# === FEATURE FLAGS ===
UPSTREAM_MODE=mock        # start with mock; switch to live later
FF_POLICY=on
FF_BREAKERS=on
FF_RETRY=on
FF_CACHE=on
FF_ASYNC=on
FF_CHAOS=off              # keep off in staging
FF_TEST_BYPASS=off        # keep off in staging

# === LOGGING ===
LOG_LEVEL=info
LOG_FORMAT=json

# === SECURITY ===
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
GATEWAY_PRIVATE_KEY=REPLACE_WITH_BASE64_PRIVATE_KEY
SIGNING_SECRET=REPLACE_WITH_STRONG_SIGNING_SECRET

# === MONITORING ===
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30s
